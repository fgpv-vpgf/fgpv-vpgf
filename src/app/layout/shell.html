<rv-north-arrow class="rv-icon-32 rv-north-arrow"></rv-north-arrow>

<div class="rv-map-coordinates rv-lg">
    <span></span>
    <span></span>
</div>

<rv-sidenav></rv-sidenav>

<!-- TODO: add proper loading message or animation to the loading splash -->
<div class="rv-loading-screen" layout layout-align="center center" ng-class="{ 'rv-loaded': self.geoService.isMapReady }">
    <div class="rv-loading-section rv-left"></div>
    <div class="rv-loading-section rv-right"></div>
    <div class="rv-spinner google-spin-wrapper">
        <div class="google-spin"></div>
    </div>
</div>

<div class="rv-esri-map" rv-init-map rv-overview-toggle tabindex="0" aria-label="{{ 'geo.aria.mapdescription' | translate }}"></div>

<!--
    Each plug has a permanent position on the page defined through CSS; plugs themselves don't move or change size (with a small exception when the plug needs to change size to accomodate content's shadow). Plug's child is a panel (panelPlug - mainPanel), which does animate on enter and leave events. Panels take all availables space in their plug.

    A panel can display a content pane - mainPanel can display either toc or toolbox content panes. When switching between toc and tollbox, the panel doesn't not animate (fade in/out animations), but the content pane does on etner and leave events.

    Panel - Content Pane - Content
-->
<rv-appbar></rv-appbar>

<!--rv-geosearch></rv-geosearch-->

<rv-help-overlay rv-state='help'></rv-help-overlay>

<!-- rv-plug-slide-down class specifies the type of animation applied to the plug's panel on enter/leave  -->
<rv-panel type="main" close-button="false" rv-state="main" rv-morph="main" class="rv-plug-slide-down"></rv-panel>

<rv-panel type="side" rv-state="side" class="rv-plug-slide-right"></rv-panel>

<rv-mapnav rv-morph="mapnav"></rv-mapnav>

<!-- rv-morph animates transitions between values stored in state -->
<rv-panel type="filters" rv-state="filters" rv-morph="filters" class="rv-plug-slide-down-grand"></rv-panel>

<div class="rv-basemap">
    <!-- rv-trap-focus property is applied here so that focus remains inside the basemap selector (and wraps to the top/bottom as needed).
    This prevents focus from being applied to elements outside the basemap selector that are under the overlay, or hidden by the basemap itself (mapnav buttons) -->
    <md-sidenav rv-basemap class="rv-basemap-selector md-sidenav-left md-whiteframe-z2" md-component-id="right">
        <rv-content-pane rv-trap-focus>

            <md-button class="md-icon-button black rv-button-32 rv-minimize-button" ng-click="self.close()" aria-label="{{ 'contentPane.aria.close' | translate }}">
                <md-icon md-svg-src="community:chevron-double-left"></md-icon>
            </md-button>

            <div class="rv-subsection" ng-repeat="tileSchema in self.map.tileSchemas">

                <div class="rv-subheader">
                    <h3 class="md-title">{{ tileSchema.name }}</h3>
                    <div class="rv-icon-16" ng-show="self.selectedWkid != projection.wkid">
                        <md-icon md-svg-src="action:info" class="rv-basemap-warning"></md-icon>
                        <span class="md-catpion" >{{ 'basemap.refresh.req' | translate }}</span>
                    </div>
                </div>

                <div class="rv-subcontent">

                    <ul class="rv-list rv-basemap-list">
                        <li class="rv-basemap-list-item" ng-repeat="basemap in self.map.basemaps | filter:{ tileSchema: { id: tileSchema.id } }">
                            <rv-basemap-item basemap="basemap" select="self.selectBasemap(basemap)"></rv-basemap-item>
                        </li>
                    </ul>

                </div>

            </div>

        </rv-content-pane>
    </md-sidenav>
</div>

<!--div ng-class="{ active: self.active }" ui-view="detailsPlug"></div-->

<!--div ng-class="{ active: self.active }" ui-view="geoSearchPlug"></div-->

<md-progress-linear
    class="rv-progress-bottom"
    md-mode="indeterminate"
    ng-show="self.map.isMapLoading"></md-progress-linear>

<div class="rv-focus-dialog-content">
    <div class="md-dialog-container">
        <md-dialog>
            <md-dialog-content class="md-dialog-content" role="document">
                <h2 class="md-title ng-binding">{{ 'focus.dialog.press' | translate }}
                <div class="md-button sm-button md-subhead md-raised">{{ 'focus.dialog.enter' | translate }}</div>
                {{ 'focus.dialog.toactivate' | translate }} <div class="md-button sm-button md-subhead md-raised">{{ 'focus.dialog.tab' | translate }}
                </div></h2>

                <div class="md-dialog-content-body">
                        {{ 'focus.dialog.main' | translate }}
                        <div class="md-button sm-button md-subhead md-raised">{{ 'focus.dialog.escape' | translate }}</div> +
                        <div class="md-button sm-button md-subhead md-raised">{{ 'focus.dialog.tab' | translate }}</div>
                </div>
            </md-dialog-content>
        </md-dialog>
    </div>
</div>
